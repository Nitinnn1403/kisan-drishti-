<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kisan Drishti - AI-Powered Farming Assistant</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for modern typography - Poppins for headlines, Inter for body -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting.css" />
    <script src="https://unpkg.com/splitting/dist/splitting.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        section[id] {
            scroll-margin-top: 80px; /* Adjust this value to match your header's height */
        }
        @keyframes gradient-pan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes twinkle {
            0% { background-position: 0 0; }
            100% { background-position: -10000px 5000px; }
        }
        /* Replace your existing body.landing-page-dark rule with this one */
        body.landing-page-dark {
            font-family: 'Inter', sans-serif;
            color: #E2E8F0;
            background-color: #020617;
            
            /* The background is now multi-layered */
            background-image:
                /* Layer 1 & 2: The twinkling stars */
                url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2334d399' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E"),
                
                /* Layer 3: The original slow-panning aurora gradient */
                radial-gradient(at 0% 0%, hsla(158, 81%, 50%, 0.2) 0px, transparent 50%),
                radial-gradient(at 90% 10%, hsla(45, 86%, 59%, 0.15) 0px, transparent 50%),
                radial-gradient(at 20% 80%, hsla(190, 78%, 56%, 0.15) 0px, transparent 50%),
                radial-gradient(at 80% 90%, hsla(160, 68%, 35%, 0.25) 0px, transparent 50%);

            background-size: auto, 300% 300%, 300% 300%, 300% 300%, 300% 300%; /* Size for each layer */
            
            /* Applying both animations at the same time */
            animation: 
                twinkle 200s linear infinite, 
                gradient-pan 35s ease infinite;
        }

        .glass-card {
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(16px);
            border-radius: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .char {
            animation: slide-in 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
            /* The --char-index is automatically created by Splitting.js */
            animation-delay: calc(40ms * var(--char-index));
        }

        @keyframes slide-in {
            from {
                transform: translateY(25px) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        h1, h2, h3, h4 { font-family: 'Poppins', sans-serif; color: #FFFFFF; }
        .text-muted { color: #94A3B8; }
        .hero-title { font-size: clamp(2.5rem, 6vw, 4.5rem); line-height: 1.1; }
        .feature-card-image { transition: transform 0.3s ease-in-out; }
        .feature-card-image:hover { transform: scale(1.02); }
        .testimonial-card {
            background: rgba(30, 41, 59, 0.5); /* Darker glass for cards inside a glass card */
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease-in-out;
        }

        .form-input {
            /* Base styles for all form elements */
            background-color: #1E293B; /* Dark blue-gray background */
            border: 1px solid #475569; /* Slate border color */
            color: #F1F5F2;            /* Light text color for input */
            border-radius: 0.5rem;     /* 8px */
            padding: 0.75rem 1rem;     /* 12px 16px */
            width: 100%;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            -webkit-appearance: none; /* Removes default Safari/Chrome styling */
            -moz-appearance: none;    /* Removes default Firefox styling */
            appearance: none;         /* Removes default styling */
        }

        /* Style for when the input is focused (clicked on) */
        .form-input:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
            outline: none;
        }

        /* This specifically styles the dropdown options for dark mode */
        .form-input option {
            background: #1E293B;
            color: #F1F5F2;
        }

        /* --- [THIS IS THE KEY FIX] --- */
        /* A wrapper for the dropdown to re-add the arrow */
        .select-wrapper {
            position: relative;
        }
        
        .select-wrapper::after {
            content: 'â–¼';
            font-size: 0.8rem;
            color: #94A3B8;
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        .text-gradient {
            background: -webkit-linear-gradient(120deg, #10B981, #057A55);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        video {
            object-fit: cover; /* This is the key property */
        }
        .hero-bg {
            background-image: url('https://images.unsplash.com/photo-1625246333195-78d9c38ad449?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-color: #1A202C; /* Fallback for the image */
            position: relative;
        }
        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom right, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.4));
        }
        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            line-height: 1.1;
        }
        .feature-card-image {
            transition: transform 0.3s ease-in-out;
        }
        .feature-card-image:hover {
            transform: scale(1.02);
        }
        .btn-secondary-nav {
            @apply bg-emerald-600 text-white font-semibold px-5 py-2 rounded-full hover:bg-emerald-700 transition-all shadow-md;
        }
        .nav-link-hover:hover {
            color: #059669;
        }
        /* --- MODAL STYLES (CLEANED) --- */
        #login-modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(5px);
            z-index: 999;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        #login-modal-overlay.visible {
            display: flex; /* This is added by JS to show */
            opacity: 1;
        }
        #login-modal-overlay > #login-register-content {
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        #login-modal-overlay.visible > #login-register-content {
            transform: scale(1);
        }
        .auth-form-container {
            position: relative;
            transition: height 0.4s ease-in-out;
            overflow: hidden;
        }
        .auth-form {
            position: absolute;
            width: 100%;
            left: 0;
            opacity: 0;
            transform: translateY(15px);
            pointer-events: none;
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .auth-form.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .glow-card {
            position: relative; /* Required for the pseudo-element */
            overflow: hidden; /* Keeps the glow contained */
        }

        .glow-card::before {
            content: '';
            position: absolute;
            left: var(--x);
            top: var(--y);
            transform: translate(-50%, -50%);
            
            background: radial-gradient(circle at center, rgba(16, 185, 129, 0.2), transparent 40%);
            width: 600px;  /* Size of the glow effect */
            height: 600px;
            
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none; /* Allows clicks to pass through */
        }

        .glow-card:hover::before {
            opacity: 1; /* Make the glow visible on hover */
        }

        .form-input { border: 1px solid #d1d5db; padding: 0.75rem 1rem; border-radius: 8px; width: 100%; font-size: 1rem; }
        .form-input:focus { border-color: #10b981; outline: none; box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2); }
        .btn-primary { background-color: #10b981; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; transition: background-color 0.3s ease; border: none; cursor: pointer; }
        .btn-primary:hover { background-color: #059669; }
        .btn-primary:disabled { background-color: #9ca3af; cursor: not-allowed; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #10b981; border-radius: 50%; width: 20px; height: 20px; animation: spin 1.5s linear infinite; display: inline-block; vertical-align: middle; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="landing-page-dark">

    <div id="login-modal-overlay">
        <div id="login-register-content" class="container mx-auto p-8 bg-white rounded-lg shadow-xl text-center max-w-md relative">
            <!-- Close Button -->
            <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl">Ã—</button>
            
            <div id="messageBox-container-modal"></div>

            <h1 class="text-4xl font-extrabold text-emerald-700 mb-6">Kisan Drishti</h1>
            <p class="text-gray-600 mb-8 text-lg">Your AI-powered agricultural assistant.</p>
            <div class="auth-form-container">
                <div id="loginFormContainer" class="auth-form active">
                    <h2 class="text-2xl font-bold text-gray-700 mb-6">Login</h2>
                    <form id="loginForm" class="space-y-4" novalidate>
                        <div><input type="email" id="loginEmail" placeholder="Email Address" class="form-input text-center"></div>
                        <div><input type="password" id="loginPassword" placeholder="Password" class="form-input text-center"></div>
                        <button type="submit" class="btn-primary w-full !py-3"><span>Login</span><span class="loader" style="display:none;"></span></button>
                    </form>
                </div>
                <div id="registerFormContainer" class="auth-form">
                    <h2 class="text-2xl font-bold text-gray-700 mb-6">Register</h2>
                    <form id="registerForm" class="space-y-4" novalidate>
                        <!-- All the required input fields -->
                        <div><input type="text" id="registerUsername" placeholder="Choose a Username" class="form-input text-center"></div>
                        <div><input type="text" id="registerContact" placeholder="Contact Number (Optional)" class="form-input text-center"></div>
                        <div><input type="email" id="registerEmail" placeholder="Your Email Address" class="form-input text-center"></div>
                        <div><input type="password" id="registerPassword" placeholder="Choose a Password" class="form-input text-center"></div>
                        
                        <!-- The missing "Confirm Password" field -->
                        <div><input type="password" id="registerConfirmPassword" placeholder="Confirm Password" class="form-input text-center"></div>
                        
                        <!-- The missing "Register" button -->
                        <button type="submit" class="btn-primary w-full !py-3">
                            <span>Register</span>
                            <span class="loader" style="display:none;"></span>
                        </button>
                    </form>
                </div>
            </div>
            <p id="auth-switch-links" class="mt-6 text-sm text-gray-600">
                <span id="login-switch-link" class="hidden">Already have an account? <a href="#" id="showLogin" class="text-emerald-600 hover:underline font-medium">Login here</a></span>
                <span id="register-switch-link">Don't have an account? <a href="#" id="showRegister" class="text-emerald-600 hover:underline font-medium">Register here</a></span>
            </p>
        </div>
    </div>

    <!-- Header / Navigation -->
    <header class="fixed top-0 left-0 right-0 z-20 bg-slate-900/50 backdrop-blur-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/" class="flex items-center gap-3">
                <img src="/static/images/logo.png" alt="Kisan Drishti Logo" class="h-10 w-10">
                <span class="text-xl font-bold text-white">Kisan Drishti</span>
            </a>
            <nav class="hidden md:flex items-center gap-8">
                <a href="#how-it-works" class="text-gray-300 hover:text-white transition-colors">How It Works</a>
                <a href="#features" class="text-gray-300 hover:text-white transition-colors">Features</a>
                <a href="#contact" class="text-gray-300 hover:text-white transition-colors">Contact</a>
                <button type="button" class="bg-white text-emerald-700 font-semibold px-5 py-2 rounded-full hover:bg-gray-200 transition-all modal-trigger">Dashboard</button>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <main>
        <section class="relative min-h-screen flex items-center justify-center text-center overflow-hidden">
            <!-- The Video Background -->
            <video autoplay loop muted playsinline class="absolute z-0 w-auto min-w-full min-h-full max-w-none">
                <!-- Make sure this path is correct! -->
                <source src="/static/videos/background.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <!-- The Dark Overlay for Readability -->
            <div class="absolute inset-0 bg-slate-900/60 z-10"></div>

            <!-- Your Original Hero Content (now on top of the video) -->
            <div class="relative z-20 px-6">
                <h1 data-splitting class="hero-title font-extrabold text-white max-w-4xl mx-auto">Your Farm's Future, <br> <span class="text-emerald-400">Right in Your Hands.</span></h1>
                <p class="mt-6 text-lg text-gray-200 max-w-3xl mx-auto leading-relaxed">Stop guessing, start growing. Kisan Drishti uses AI to give you clear, actionable insights to increase yields, save costs, and maximize profits.</p>
                <div class="mt-10">
                    <button type="button" class="bg-emerald-500 text-white font-bold text-lg px-8 py-4 rounded-full hover:bg-emerald-600 transition-all transform hover:scale-105 inline-block modal-trigger" title="Start Your Analysis">Start Your Analysis</button>
                </div>
            </div>
        </section>

        <!-- === NEW "HOW IT WORKS" SECTION === -->
        <section id="how-it-works" class="py-24">
            <div class="container mx-auto px-6">
                <div class="glass-card glow-card p-12">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold mb-4">From Data to Decisions in 3 Simple Steps</h2>
                        <p class="text-lg text-muted mt-4 max-w-3xl mx-auto">We turn complex agricultural data into an easy-to-follow plan, empowering you to take decisive action.</p>
                    </div>

                    <div class="grid md:grid-cols-3 gap-12 relative md:flex md:items-start">
                        <!-- Dotted line connecting the steps -->
                        <div class="hidden md:block absolute top-12 left-0 w-full h-px">
                            <svg width="100%" height="2" class="absolute">
                                <line x1="15%" y1="1" x2="85%" y2="1" stroke="#cbd5e1" stroke-width="2" stroke-dasharray="8, 8"/>
                            </svg>
                        </div>

                        <!-- Step 1: Capture -->
                        <div class="relative flex flex-col items-center text-center z-10">
                            <div class="flex-shrink-0 w-24 h-24 mb-4 rounded-full bg-emerald-100 flex items-center justify-center border-4 border-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </div>
                            <h3 class="text-2xl font-bold mb-2">1. Capture</h3>
                            <p class="text-gray-400 leading-relaxed">Simply take a photo of a plant's leaf or a scoop of your soil. Provide your location for the most accurate climate data.</p>
                        </div>
                        
                        <!-- Step 2: Analyze -->
                        <div class="relative flex flex-col items-center text-center z-10">
                            <div class="flex-shrink-0 w-24 h-24 mb-4 rounded-full bg-emerald-100 flex items-center justify-center border-4 border-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                            </div>
                            <h3 class="text-2xl font-bold mb-2">2. Analyze</h3>
                            <p class="text-gray-400 leading-relaxed">Our AI models process the images and cross-reference them with weather, market, and agricultural data in real-time.</p>
                        </div>

                        <!-- Step 3: Act -->
                        <div class="relative flex flex-col items-center text-center z-10">
                            <div class="flex-shrink-0 w-24 h-24 mb-4 rounded-full bg-emerald-100 flex items-center justify-center border-4 border-white shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <h3 class="text-2xl font-bold mb-2">3. Act</h3>
                            <p class="text-gray-400 leading-relaxed">Receive a clear, actionable plan: what to grow, how to treat issues, and how much fertilizer to use for maximum yield.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section - Redesigned to list all important features -->
        <section id="features" class="py-20">
            <div class="container mx-auto px-6">
                <div class="glass-card glow-card p-12">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold mb-4">Actionable Insights at Your Fingertips</h2>
                        <p class="text-lg text-gray-300 mt-4 max-w-3xl mx-auto">From soil to sale, Kisan Drishti provides the clarity you need to make every decision with confidence.</p>
                    </div>

                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-12">
                        <!-- Feature 1: AI Crop Doctor (Plant Health Analysis) -->
                        <div class="flex flex-col items-center text-center p-6 rounded-lg shadow-md border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.01]">
                            <div class="mb-4">
                                <img src="/static/images/cropdoc.png" alt="AI Crop Doctor" class="h-24 mx-auto">
                            </div>
                            <h3 class="text-2xl font-bold mb-2">AI Crop Doctor</h3>
                            <p class="text-gray-400 leading-relaxed">Instantly identify potential diseases and nutrient deficiencies from a photo of any plant leaf, with immediate treatment and prevention advice.</p>
                        </div>
                        
                        <!-- Feature 2: Smart Soil Analysis & Crop Recommendations -->
                        <div class="flex flex-col items-center text-center p-6 rounded-lg shadow-md border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.01]">
                            <div class="mb-4">
                                <img src="/static/images/analyze.png" alt="Smart Soil Analysis" class="h-24 mx-auto">
                            </div>
                            <h3 class="text-2xl font-bold mb-2">Smart Soil Analysis</h3>
                            <p class="text-gray-400 leading-relaxed">Understand your soil type, get nutrient insights (N, P, K), and receive AI-backed crop recommendations tailored to your land and local climate.</p>
                        </div>

                        <!-- Feature 3: Mandi Price Insights -->
                        <div class="flex flex-col items-center text-center p-6 rounded-lg shadow-md border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.01]">
                            <div class="mb-4">
                                <img src="/static/images/price.png" alt="Personalized AI Guidance" class="h-24 mx-auto">
                            </div>
                            <h3 class="text-2xl font-bold mb-2">Live Mandi Prices</h3>
                            <p class="text-gray-400 leading-relaxed">Stay updated with daily mandi (market) prices for various crops in your region, helping you make informed selling decisions.</p>
                        </div>

                        <!-- Feature 4: Personalized AI Chat Guidance -->
                        <div class="flex flex-col items-center text-center p-6 rounded-lg shadow-md border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.01]">
                            <div class="mb-4">
                                <img src="/static/images/aibot.png" alt="Personalized AI Guidance" class="h-24 mx-auto">
                            </div>
                            <h3 class="text-2xl font-bold mb-2">Personalized AI Guidance</h3>
                            <p class="text-gray-400 leading-relaxed">Chat with Drishti AI, your personal agri-advisor, for custom fertilizer plans, weather insights, and answers to all your farming questions.</p>
                        </div>

                        <!-- Feature 5: Accurate Weather Forecasts -->
                        <div class="flex flex-col items-center text-center p-6 rounded-lg shadow-md border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.01]">
                            <div class="mb-4">
                                <img src="/static/images/weather.png" alt="Accurate Weather Forecasts" class="h-24 mx-auto">
                            </div>
                            <h3 class="text-2xl font-bold mb-2">Accurate Weather Forecasts</h3>
                            <p class="text-gray-400 leading-relaxed">Access real-time weather, annual climate summaries, and historical rainfall data for your specific location to plan effectively.</p>
                        </div>

                        <!-- Feature 6: Comprehensive Field Reports -->
                        <div class="flex flex-col items-center text-center p-6 rounded-lg shadow-md border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.01]">
                            <div class="mb-4">
                                <img src="/static/images/report.png" alt="Comprehensive Field Reports" class="h-24 mx-auto">
                            </div>
                            <h3 class="text-2xl font-bold mb-2">Comprehensive Field Reports</h3>
                            <p class="text-gray-400 leading-relaxed">Generate and save detailed analysis reports for your fields, tracking progress and making informed long-term plans.</p>
                        </div>
                    </div>

                    <!-- New section for UI Mockups, with alternating images -->
                    <div class="text-center mt-20 mb-16">
                        <h2 class="text-4xl font-bold mb-4">See Kisan Drishti in Action</h2>
                        <p class="text-lg text-gray-300 mt-4 max-w-3xl mx-auto">Visual previews of our intuitive web interface.</p>
                    </div>

                    <!-- UI Mockup 1: Crop Analysis (Image on Right) -->
                    <div class="grid md:grid-cols-2 gap-16 items-center mb-16">
                        <div class="flex flex-col gap-4 text-left">
                            <h3 class="text-3xl font-bold">Intuitive Crop Diagnosis</h3>
                            <p class="text-gray-400 leading-relaxed">Our AI Crop Doctor provides a clear, visual diagnosis of plant health issues. Simply upload a photo and get actionable insights to protect your harvest.</p>
                        </div>
                        <div class="bg-white p-4 rounded-2xl shadow-xl feature-card-image">
                            <img src="/static/images/analyze_crop2.png" alt="Kisan Drishti Crop Analysis UI" class="rounded-xl w-full h-auto">
                        </div>
                    </div>

                    <!-- UI Mockup 2: Field Recommendation (Image on Left) -->
                    <div class="grid md:grid-cols-2 gap-16 items-center">
                        <div class="bg-white p-4 rounded-2xl shadow-xl feature-card-image">
                            <img src="/static/images/analyze_field2.png" alt="Kisan Drishti Field Recommendation UI" class="rounded-xl w-full h-auto">
                        </div>
                        <div class="flex flex-col gap-4 text-left">
                            <h3 class="text-3xl font-bold">Smart Crop Recommendations</h3>
                            <p class="text-gray-400 leading-relaxed">Based on your soil type and local climate, Kisan Drishti recommends the most suitable and profitable crops, empowering you to make data-driven planting decisions.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Final CTA Section -->

        <section id="contact" class="py-24">
            <div class="container mx-auto px-6">
                <div class="glass-card p-8 md:p-12">
                    <div class="grid md:grid-cols-2 gap-12">
                        
                        <!-- Left Column: Information -->
                        <div class="flex flex-col justify-between">
                            <div>
                                <h2 class="text-4xl font-bold mb-4">Get in Touch</h2>
                                <p class="text-muted mb-8">Have a question, a partnership idea, or just want to say hello? Weâ€™d love to hear from you.</p>
                                
                                <div class="space-y-6">
                                    <div class="flex items-center gap-4">
                                        <div class="bg-slate-700 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg></div>
                                        <div>
                                            <h4 class="font-semibold text-white">Email Us</h4>
                                            <a href="mailto:info@kisandrishti.com" class="text-muted hover:text-emerald-400 transition-colors">info@kisandrishti.com</a>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <div class="bg-slate-700 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg></div>
                                        <div>
                                            <h4 class="font-semibold text-white">Call Us</h4>
                                            <p class="text-muted">+91 123 456 7890</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-center gap-6 mt-10">
                                <!-- Instagram Icon -->
                                <a href="https://www.instagram.com/nitinnn._.14/" target="_blank" rel="noopener noreferrer" title="Instagram">
                                    <img src="https://cdn.simpleicons.org/instagram/94A3B8" alt="Instagram Logo" class="w-6 h-6 transition-opacity hover:opacity-75" />
                                </a>
                                
                                <!-- LinkedIn Icon -->
                                <a href="https://www.linkedin.com/in/nitin--pandey" target="_blank" rel="noopener noreferrer" title="LinkedIn" class="text-gray-400 hover:text-white">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                        <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <!-- Right Column: Contact Form -->
                        <div>
                            <form id="contactForm" action="https://formspree.io/f/xnnzjara" method="POST" class="space-y-6">
                                <div>
                                    <label for="full-name" class="block text-sm font-semibold text-gray-300 mb-2">Full Name</label>
                                    <!-- Add name="name" -->
                                    <input type="text" name="name" id="full-name" autocomplete="name" class="form-input" required>
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-semibold text-gray-300 mb-2">Email Address</label>
                                    <!-- Add name="email" -->
                                    <input id="email" name="email" type="email" autocomplete="email" class="form-input" required>
                                </div>
                                <div class="select-wrapper">
                                    <label for="inquiry-type" class="block text-sm font-semibold text-gray-300 mb-2">Reason for Contact</label>
                                    <!-- Add name="reason" -->
                                    <select id="inquiry-type" name="reason" class="form-input">
                                        <option>General Inquiry</option>
                                        <option>Technical Support</option>
                                        <option>Partnership Proposal</option>
                                        <option>Feedback & Suggestions</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="message" class="block text-sm font-semibold text-gray-300 mb-2">Message</label>
                                    <!-- Add name="message" -->
                                    <textarea id="message" name="message" rows="4" class="form-input" required></textarea>
                                </div>
                                <div>
                                    <button type="submit" class="w-full bg-emerald-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-emerald-700 transition-all">Send Message</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8" id="contact">
        <div class="container mx-auto px-6 text-center">
            <p class="text-gray-400">&copy; 2025 Kisan Drishti. All Rights Reserved. Built to empower the Indian farmer.</p>
            <div class="flex justify-center space-x-6 mt-4">
                <!-- Placeholder for social media links or other contact info -->
                <a href="#" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a>
            </div>
        </div>
    </footer>

    <!-- === NEW: MODAL SCRIPT === -->
    <script type="module">
        // Import API functions directly. The path /api_client.js should work from the root.
        import * as API from '/api_client.js';

        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageBox-container-modal');
            if (!container) return;

            // Create the message box
            const messageBox = document.createElement('div');
            const colors = { info: 'bg-blue-500', success: 'bg-green-500', warning: 'bg-yellow-500', error: 'bg-red-500' };
            // Add transition classes for a smooth fade-out effect
            messageBox.className = `p-3 mb-4 rounded-lg text-white font-semibold shadow-lg ${colors[type]} transition-opacity duration-500 ease-in-out`;
            messageBox.textContent = message;

            // Clear previous messages and append the new one
            container.innerHTML = '';
            container.appendChild(messageBox);

            // Set a timer to automatically remove the message
            setTimeout(() => {
                // Add an opacity-0 class to trigger the fade-out transition
                messageBox.classList.add('opacity-0');

                // After the transition ends, remove the element from the DOM completely
                setTimeout(() => {
                    if (messageBox.parentNode) {
                        messageBox.parentNode.removeChild(messageBox);
                    }
                }, 500); // This duration should match the transition duration
            }, 2500); // The message will be visible for 4 seconds (4000ms)
        }

        function setButtonLoading(button, isLoading) {
            if (!button) return;
            const textSpan = button.querySelector('span:not(.loader)');
            const loaderSpan = button.querySelector('.loader');
            button.disabled = isLoading;
            if (textSpan) textSpan.style.display = isLoading ? 'none' : 'inline';
            if (loaderSpan) loaderSpan.style.display = isLoading ? 'inline-block' : 'none';
        }

        // From the script in index.html

        function toggleAuthForms(showLogin) {
            const loginForm = document.getElementById('loginFormContainer');
            const registerForm = document.getElementById('registerFormContainer');
            const loginLink = document.getElementById('login-switch-link');
            const registerLink = document.getElementById('register-switch-link');
            const container = document.querySelector('.auth-form-container');

            if (showLogin) {
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
                loginLink.classList.add('hidden');
                registerLink.classList.remove('hidden');
                // Set the container's height to match the login form
                container.style.height = loginForm.scrollHeight + 'px';
            } else {
                loginForm.classList.remove('active');
                registerForm.classList.add('active');
                loginLink.classList.remove('hidden');
                registerLink.classList.add('hidden');
                // Set the container's height to match the (taller) registration form
                container.style.height = registerForm.scrollHeight + 'px';
            }
        }

        // --- Modal Control ---
        // --- Modal Control ---
        const modalOverlay = document.getElementById('login-modal-overlay');
        const modalTriggers = document.querySelectorAll('.modal-trigger');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        const openModal = () => {
            modalOverlay.style.display = 'flex';
            setTimeout(() => {
                modalOverlay.classList.add('visible');
                // Set the initial height correctly when the modal opens
                toggleAuthForms(true); // Default to showing the login form
            }, 10);
        };

        const closeModal = () => {
            modalOverlay.classList.remove('visible');
            setTimeout(() => { modalOverlay.style.display = 'none'; }, 300);
        };

        modalTriggers.forEach(trigger => trigger.addEventListener('click', (e) => { e.preventDefault(); openModal(); }));
        modalCloseBtn.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });

        // --- Form Submission Logic (adapted from script.js) ---
        async function handleLogin(event) {
            event.preventDefault();
            const form = event.target;
            // CORRECTED: Get value from #loginEmail instead of #loginUsername
            const email = form.querySelector('#loginEmail').value;
            const password = form.querySelector('#loginPassword').value;

            if (!email.trim() || !password.trim()) {
                showMessage('Please fill out all fields.', 'warning');
                return;
            }
            setButtonLoading(form.querySelector('button'), true);
            try {
                // The API client now correctly sends 'email'
                const data = await API.loginUser(email, password);
                window.location.href = '/app.html';
            } catch (error) {
                showMessage(error.message, 'error');
            } finally {
                setButtonLoading(form.querySelector('button'), false);
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const form = event.target;
            // CORRECTED: Get values from all the final, correct fields
            const username = form.querySelector('#registerUsername').value;
            const contact = form.querySelector('#registerContact').value;
            const email = form.querySelector('#registerEmail').value;
            const password = form.querySelector('#registerPassword').value;
            const confirmPassword = form.querySelector('#registerConfirmPassword').value;

            if (!username.trim() || !email.trim() || !password.trim()) {
                showMessage('Please fill out Username, Email, and Password.', 'warning');
                return;
            }
            if (password !== confirmPassword) {
                showMessage('Passwords do not match.', 'error');
                return;
            }
            setButtonLoading(form.querySelector('button'), true);
            try {
                // The API client now correctly sends all fields
                const data = await API.registerUser(username, contact, email, password);
                window.location.href = '/app.html';
            } catch (error) {
                showMessage(error.message, 'error');
            } finally {
                setButtonLoading(form.querySelector('button'), false);
            }
        }

        async function handleContactSubmit(event) {
            event.preventDefault(); // This is the most important line! It stops the redirect.

            const form = event.target;
            const button = form.querySelector('button[type="submit"]');
            const formData = new FormData(form);

            // Temporarily disable the button and show a "Sending..." message
            button.textContent = 'Sending...';
            button.disabled = true;

            try {
                const response = await fetch(form.action, {
                    method: form.method,
                    body: formData,
                    headers: {
                        'Accept': 'application/json' // This tells Formspree to reply with JSON
                    }
                });

                if (response.ok) {
                    // Use your existing showMessage function for success!
                    showMessage('Thank you for your message!', 'success');
                    form.reset(); // Clear the form fields
                } else {
                    const data = await response.json();
                    const errorMessage = data.errors?.map(e => e.message).join(', ') || 'An unknown error occurred.';
                    showMessage(errorMessage, 'error');
                }
            } catch (error) {
                showMessage('A network error occurred. Please try again.', 'error');
            } finally {
                // Re-enable the button and set the text back
                button.textContent = 'Send Message';
                button.disabled = false;
            }
        }

        // --- Attach Event Listeners ---
        document.getElementById('loginForm').addEventListener('submit', handleLogin);
        document.getElementById('registerForm').addEventListener('submit', handleRegister);
        document.getElementById('showRegister').addEventListener('click', (e) => { e.preventDefault(); toggleAuthForms(false); });
        document.getElementById('showLogin').addEventListener('click', (e) => { e.preventDefault(); toggleAuthForms(true); });
        document.getElementById('contactForm').addEventListener('submit', handleContactSubmit);
        
        document.addEventListener('DOMContentLoaded', () => {
            const glowCards = document.querySelectorAll('.glow-card');

            glowCards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    card.style.setProperty('--x', `${x}px`);
                    card.style.setProperty('--y', `${y}px`);
                });
            });
        });
    </script>
    <script>Splitting();</script>
</body>
</html>
